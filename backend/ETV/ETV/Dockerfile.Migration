# Migration Stage - Runs EF Core migrations
FROM mcr.microsoft.com/dotnet/sdk:8.0 AS migrator
WORKDIR /src

# Copy project files
COPY ["ETV.csproj", "."]

# Restore dependencies
RUN dotnet restore "ETV.csproj"

# Copy source code
COPY . .

# Run migrations
ENTRYPOINT ["dotnet", "ef", "database", "update"]
